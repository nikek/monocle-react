import {toggle, set, copy} from 'cerebral/operators'
import updateItemTitle from './chains/updateItemTitle'
import addNewItem from './chains/addNewItem'

export default module => {
  module.addState({
    title: 'New Graph',
    options: {
      axis: true,
      grid: false,
      legendVisible: false,
      round: true,
      stacked: false,
      unit: "si",
      valueScale: "linear",
      zeroBased: true,
      range: {
        start: 1474547939583,
        end: 1474720739583
      }
    },
    datasource: {
      aggregations: [
        {
          type: "group",
          of: [
            "heroic_id",
            "id",
            "site"
          ],
          each: [
            {
              type: "min"
            }
          ]
        }
      ],
      filter: {
        custom: [],
        key: "heroic",
        tags: {
          component: "consumer",
          role: "heroicconsumercs",
          stat: "5m",
          what: "message-in"
        }
      },
      range: {
        type: "relative",
        unit: "minutes",
        value: 90
      }
    },
    response: {"range":{"start":1474547939583,"end":1474720739583},"trace":{"what":{"name":"com.spotify.heroic.CoreQueryManager#query"},"elapsed":57,"children":[{"what":{"name":"com.spotify.heroic.cluster.LocalClusterNode#query"},"elapsed":8,"children":[{"what":{"name":"com.spotify.heroic.metric.LocalMetricManager#query"},"elapsed":17075,"children":[]}]}]},"limits":[],"commonTags":{"role":["database"],"what":["teleported-goats"]},"result":[{"type":"points","hash":"1cbe44d9","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,481.7773875096692],[1474555139583,507.6150382720089],[1474558739583,515.674980213639],[1474562339583,507.53404998461974],[1474565939583,496.66172599488107],[1474569539583,497.93664700456316],[1474573139583,457.64867883102534],[1474576739583,441.03690255791946],[1474580339583,424.24662466429294],[1474583939583,391.3840851152721],[1474587539583,366.9935834877102],[1474591139583,341.2937785703149],[1474594739583,311.2465456860712],[1474598339583,316.3756485303362],[1474601939583,313.1664825039255],[1474605539583,298.33763281482993],[1474609139583,302.82477043650596],[1474612739583,329.7972425272129],[1474616339583,346.1406303453873],[1474619939583,368.2713372221773],[1474623539583,398.28919652519494],[1474627139583,414.1795642218974],[1474630739583,447.7062920964569],[1474634339583,463.8617143413414],[1474637939583,482.0442358414325],[1474641539583,508.12725391260904],[1474645139583,506.3379330412338],[1474648739583,512.3845540118838],[1474652339583,503.47016484737026],[1474655939583,484.76546629250913],[1474659539583,462.471226819358],[1474663139583,443.567178613293],[1474666739583,413.1424156186447],[1474670339583,390.81315684449885],[1474673939583,365.0292691713038],[1474677539583,332.91633863141817],[1474681139583,325.367196204717],[1474684739583,323.51145534051795],[1474688339583,308.44507534154576],[1474691939583,306.6606649311939],[1474695539583,319.9402984970235],[1474699139583,318.0567477005686],[1474702739583,344.82557956469384],[1474706339583,381.69754941318706],[1474709939583,396.62130702837624],[1474713539583,428.46237765965975],[1474717139583,443.34314659117206],[1474720739583,463.62713328206723]],"key":"key-11","tags":{"role":"database","what":"teleported-goats","host":"11.example.com"},"tagCounts":{}},{"type":"points","hash":"5658059b","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,370.6434207961403],[1474555139583,353.38473110310724],[1474558739583,352.51118084209884],[1474562339583,353.8284744837922],[1474565939583,317.43341293687035],[1474569539583,304.81048937719385],[1474573139583,283.0883300387348],[1474576739583,256.93422419653825],[1474580339583,233.563923290682],[1474583939583,212.3859611955408],[1474587539583,193.36173324084604],[1474591139583,172.6676574023953],[1474594739583,164.0500835972509],[1474598339583,170.9617946801448],[1474601939583,173.29236477058203],[1474605539583,185.67821602276734],[1474609139583,211.29615496257534],[1474612739583,224.44010933624],[1474616339583,246.5914261085211],[1474619939583,273.2270750091596],[1474623539583,296.6023559721024],[1474627139583,320.3589416429352],[1474630739583,346.92440465028255],[1474634339583,373.1144429819899],[1474637939583,365.1690259119385],[1474641539583,372.4506496108587],[1474645139583,363.8587894708629],[1474648739583,363.3852222368604],[1474652339583,336.45913185487905],[1474655939583,312.8475460819301],[1474659539583,286.57149289810377],[1474663139583,264.201083082219],[1474666739583,224.72047212100392],[1474670339583,196.12218022159112],[1474673939583,197.9067256376813],[1474677539583,168.85067063484226],[1474681139583,171.5163012471872],[1474684739583,160.8063791443136],[1474688339583,173.5527389343782],[1474691939583,194.59678503307782],[1474695539583,205.45181782346813],[1474699139583,232.1447808140461],[1474702739583,236.90291342341845],[1474706339583,276.39573683219925],[1474709939583,300.74709556214015],[1474713539583,318.12685101407345],[1474717139583,348.2990930184211],[1474720739583,369.6104087271039]],"key":"key-54","tags":{"role":"database","what":"teleported-goats","host":"54.example.com"},"tagCounts":{}},{"type":"points","hash":"7b7b82ae","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,256.1293153692765],[1474555139583,250.8044482840886],[1474558739583,237.40440701136262],[1474562339583,229.00369462912846],[1474565939583,216.47797967130913],[1474569539583,179.24395552694023],[1474573139583,161.64753632292494],[1474576739583,139.94888092220364],[1474580339583,108.51993785546256],[1474583939583,90.57362098068366],[1474587539583,86.90906135689781],[1474591139583,72.57875253414218],[1474594739583,53.14946786458826],[1474598339583,65.05717888643417],[1474601939583,62.81767865601492],[1474605539583,83.12159360075401],[1474609139583,103.96653513683631],[1474612739583,107.14537765826395],[1474616339583,145.26902913216998],[1474619939583,183.78396359595973],[1474623539583,194.27824790410756],[1474627139583,223.9786685668087],[1474630739583,246.53419839706643],[1474634339583,244.9386018022753],[1474637939583,263.6419416326751],[1474641539583,267.8013505845554],[1474645139583,256.98832593296873],[1474648739583,224.80406430975648],[1474652339583,213.22386099210098],[1474655939583,191.93648840478],[1474659539583,155.33999693051732],[1474663139583,134.8274935979171],[1474666739583,112.22653570877614],[1474670339583,89.76270429704476],[1474673939583,75.94306542532144],[1474677539583,65.48877974034991],[1474681139583,66.18951029446637],[1474684739583,64.63181830699898],[1474688339583,69.98352913234571],[1474691939583,84.62078374923445],[1474695539583,113.88365019825164],[1474699139583,120.77327818718966],[1474702739583,158.8613856243779],[1474706339583,178.91717234570174],[1474709939583,191.61479224064303],[1474713539583,213.90033465679937],[1474717139583,232.54185974125375],[1474720739583,261.2226786156445]],"key":"key-44","tags":{"role":"database","what":"teleported-goats","host":"44.example.com"},"tagCounts":{}},{"type":"points","hash":"fd94b858","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,579.8112035242882],[1474555139583,568.2625528020087],[1474558739583,574.2143645107313],[1474562339583,576.5296430983258],[1474565939583,616.2927283738661],[1474569539583,631.1082616704906],[1474573139583,663.0280354948763],[1474576739583,688.6564012683173],[1474580339583,708.1845481010023],[1474583939583,728.0127406171719],[1474587539583,749.2495470065462],[1474591139583,758.2965939807316],[1474594739583,772.2292420163622],[1474598339583,763.6942529990454],[1474601939583,756.3361079938263],[1474605539583,741.56051263565],[1474609139583,716.5568149481203],[1474612739583,706.6026177296569],[1474616339583,684.3374558588058],[1474619939583,656.3057250027922],[1474623539583,634.6691128998309],[1474627139583,610.0745200086641],[1474630739583,571.4922827216984],[1474634339583,575.2407984785323],[1474637939583,569.5843485200967],[1474641539583,569.2879895517715],[1474645139583,568.8311932410759],[1474648739583,600.4366508184506],[1474652339583,608.8733105454697],[1474655939583,622.5647179287453],[1474659539583,659.2014489160854],[1474663139583,689.7829659358964],[1474666739583,709.6433356786628],[1474670339583,725.2038832813444],[1474673939583,751.8698391602559],[1474677539583,764.8042557203541],[1474681139583,768.6305842119407],[1474684739583,776.8179797427422],[1474688339583,754.5731794018253],[1474691939583,745.1368950233265],[1474695539583,730.9560595767061],[1474699139583,707.043335751388],[1474702739583,680.7576668779072],[1474706339583,650.5281744228344],[1474709939583,627.2413147010046],[1474713539583,613.9910526449602],[1474717139583,592.5457688999686],[1474720739583,572.2051368301182]],"key":"key-65","tags":{"role":"database","what":"teleported-goats","host":"65.example.com"},"tagCounts":{}},{"type":"points","hash":"525894cf","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,905.2958618375109],[1474555139583,926.4699607033629],[1474558739583,913.3178398184909],[1474562339583,908.0600249143645],[1474565939583,891.9681985398877],[1474569539583,868.993646425489],[1474573139583,845.0247819276556],[1474576739583,823.864830602444],[1474580339583,802.6246878152358],[1474583939583,763.9491746530326],[1474587539583,744.6036294992506],[1474591139583,737.9729425600931],[1474594739583,724.0528718609123],[1474598339583,723.7218224062269],[1474601939583,722.7942612720597],[1474605539583,723.4650487064883],[1474609139583,749.565043777942],[1474612739583,765.8489763276903],[1474616339583,786.3735605858111],[1474619939583,814.4984280911478],[1474623539583,832.3027322419333],[1474627139583,852.358173397141],[1474630739583,895.2460635682368],[1474634339583,895.0794172484796],[1474637939583,919.8300376969158],[1474641539583,926.904091131003],[1474645139583,924.6355422272346],[1474648739583,903.9939304698568],[1474652339583,889.885372522706],[1474655939583,871.8594345844311],[1474659539583,847.7356371385476],[1474663139583,826.0535891225832],[1474666739583,793.5415665901206],[1474670339583,780.728321445392],[1474673939583,738.3404794845362],[1474677539583,735.752483284673],[1474681139583,709.0575487215706],[1474684739583,724.4481266828072],[1474688339583,737.6393945013731],[1474691939583,725.156571684978],[1474695539583,736.7370121292655],[1474699139583,765.8188622379879],[1474702739583,803.2480386608353],[1474706339583,810.6461027509125],[1474709939583,836.9134016821888],[1474713539583,860.3385055173926],[1474717139583,879.3053133107048],[1474720739583,881.5893211514165]],"key":"key-10","tags":{"role":"database","what":"teleported-goats","host":"10.example.com"},"tagCounts":{}},{"type":"points","hash":"b808a1d6","shard":{"site":"local"},"cadence":3600000,"values":[],"key":"key-97","tags":{"role":"database","what":"teleported-goats","host":"97.example.com"},"tagCounts":{}},{"type":"points","hash":"f94f4bcb","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,559.7304269976532],[1474555139583,529.2474201169025],[1474558739583,508.2969220087366],[1474562339583,497.4377596870293],[1474565939583,481.0890133118489],[1474569539583,473.3640782901979],[1474573139583,476.4319682233623],[1474576739583,497.79722513130037],[1474580339583,493.5810738657161],[1474583939583,524.7247904727153],[1474587539583,545.4538337058585],[1474591139583,578.3695645453486],[1474594739583,588.2697526544706],[1474598339583,618.5214628222799],[1474601939583,637.0443430399013],[1474605539583,653.8803126933902],[1474609139583,672.8595762438406],[1474612739583,691.3511435075279],[1474616339583,674.0858700626733],[1474619939583,678.8611749623038],[1474623539583,657.0872046726],[1474627139583,630.6317272367417],[1474630739583,625.1077259755727],[1474634339583,581.3122819048194],[1474637939583,567.2076686131281],[1474641539583,546.6410799373693],[1474645139583,521.5739973252913],[1474648739583,504.48142080273954],[1474652339583,494.0135239567382],[1474655939583,464.52354773953255],[1474659539583,486.75276250901334],[1474663139583,476.1179767257029],[1474666739583,507.17327662148534],[1474670339583,502.7505167276165],[1474673939583,543.5569386919445],[1474677539583,573.1504638469692],[1474681139583,592.5979252006393],[1474684739583,627.1070732706531],[1474688339583,642.4363600009403],[1474691939583,660.5766296874355],[1474695539583,674.9586410915244],[1474699139583,681.1371325857815],[1474702739583,677.2962187754486],[1474706339583,673.0787808061206],[1474709939583,665.2070165916472],[1474713539583,645.4858020600354],[1474717139583,637.3568794269938],[1474720739583,580.7935837835507]],"key":"key-79","tags":{"role":"database","what":"teleported-goats","host":"79.example.com"},"tagCounts":{}},{"type":"points","hash":"9e52e2c6","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,476.2485311986673],[1474555139583,470.6189229598963],[1474558739583,476.5411326599852],[1474562339583,479.5186371449632],[1474565939583,467.9659708342491],[1474569539583,438.96295944225955],[1474573139583,427.9561589155704],[1474576739583,411.25753580259664],[1474580339583,378.4527834882443],[1474583939583,354.2386895571108],[1474587539583,322.7799734667425],[1474591139583,296.20076043389076],[1474594739583,305.6164325294038],[1474598339583,283.8101211374718],[1474601939583,276.7930678546036],[1474605539583,286.0691418309692],[1474609139583,294.3367634200414],[1474612739583,319.489473199862],[1474616339583,342.9204428345007],[1474619939583,366.8797254144164],[1474623539583,394.15456872140925],[1474627139583,416.8966782591812],[1474630739583,432.8676824653756],[1474634339583,452.36319120738625],[1474637939583,474.679032239929],[1474641539583,493.12175464724817],[1474645139583,488.6659502300161],[1474648739583,475.4105313196794],[1474652339583,462.0443464036581],[1474655939583,459.96563815688967],[1474659539583,434.0430076052804],[1474663139583,393.0671111738462],[1474666739583,366.1090201421936],[1474670339583,355.2040305346888],[1474673939583,336.88579913174397],[1474677539583,300.85552388867205],[1474681139583,290.57909224564645],[1474684739583,290.5085217824875],[1474688339583,287.85594415254616],[1474691939583,304.5791206128398],[1474695539583,290.1723799789184],[1474699139583,318.8663977543441],[1474702739583,340.4328113078766],[1474706339583,375.0245303722503],[1474709939583,397.4285200615856],[1474713539583,432.1079079739025],[1474717139583,445.01245290126906],[1474720739583,481.53559388392637]],"key":"key-88","tags":{"role":"database","what":"teleported-goats","host":"88.example.com"},"tagCounts":{}},{"type":"points","hash":"dc659f3c","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,97.23230444115242],[1474555139583,130.43196181457577],[1474558739583,147.4477044647889],[1474562339583,166.20015404023434],[1474565939583,191.77501522771496],[1474569539583,215.2013254580776],[1474573139583,247.7035455658689],[1474576739583,264.64661054378007],[1474580339583,279.5634315225392],[1474583939583,277.05220555631695],[1474587539583,290.8194815010068],[1474591139583,275.458213689097],[1474594739583,255.54981814612267],[1474598339583,246.73747298346032],[1474601939583,225.14937127441215],[1474605539583,194.87304415998355],[1474609139583,158.4250920914751],[1474612739583,127.77827708450052],[1474616339583,129.05640142368298],[1474619939583,99.96695187589057],[1474623539583,93.57449640043444],[1474627139583,85.06840928863008],[1474630739583,85.4885944896626],[1474634339583,93.35709166747051],[1474637939583,103.82380881125924],[1474641539583,126.7925349991697],[1474645139583,152.63581627942398],[1474648739583,179.01999429307156],[1474652339583,184.81373462638683],[1474655939583,226.01732290526243],[1474659539583,250.81004976076264],[1474663139583,254.82690832359543],[1474666739583,271.52244634003364],[1474670339583,278.58408111815464],[1474673939583,284.2759242964788],[1474677539583,279.28960816967816],[1474681139583,257.7704941768898],[1474684739583,243.95278212319852],[1474688339583,222.673550117314],[1474691939583,198.8436494305848],[1474695539583,176.9924226396289],[1474699139583,138.22084951600507],[1474702739583,123.15183745325508],[1474706339583,111.2518632223793],[1474709939583,95.56805120384831],[1474713539583,98.09519913112584],[1474717139583,93.84554190165598],[1474720739583,103.47362083849097]],"key":"key-99","tags":{"role":"database","what":"teleported-goats","host":"99.example.com"},"tagCounts":{}},{"type":"points","hash":"4da4f131","shard":{"site":"local"},"cadence":3600000,"values":[],"key":"key-2","tags":{"role":"database","what":"teleported-goats","host":"2.example.com"},"tagCounts":{}},{"type":"points","hash":"891a6ac4","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,583.1647518818382],[1474555139583,551.4365417006779],[1474558739583,536.691799238],[1474562339583,509.81325298776596],[1474565939583,496.6717832945287],[1474569539583,490.07591468749456],[1474573139583,487.86542184752926],[1474576739583,493.4117619847449],[1474580339583,496.33257825366735],[1474583939583,528.4603235134581],[1474587539583,536.0390061945034],[1474591139583,573.5137303927205],[1474594739583,600.0783343715055],[1474598339583,617.3487911836256],[1474601939583,633.4475792979507],[1474605539583,664.0469471271336],[1474609139583,679.1627924025753],[1474612739583,690.7082644922968],[1474616339583,683.7791004448577],[1474619939583,676.2748376302627],[1474623539583,670.9647296767496],[1474627139583,657.5643773757761],[1474630739583,628.807655199372],[1474634339583,597.6828952042621],[1474637939583,578.9707208354407],[1474641539583,551.5411394816076],[1474645139583,531.0311432011097],[1474648739583,507.3264982958574],[1474652339583,504.2533774201637],[1474655939583,483.6364712718353],[1474659539583,473.2250839513924],[1474663139583,481.53683658942174],[1474666739583,504.882068113699],[1474670339583,517.4339216020021],[1474673939583,543.792501437378],[1474677539583,571.0138555437359],[1474681139583,586.0767815593481],[1474684739583,617.3328350511855],[1474688339583,638.2626865312986],[1474691939583,667.6284660138836],[1474695539583,674.4179584212285],[1474699139583,690.166332342154],[1474702739583,680.3517710354708],[1474706339583,686.644084009033],[1474709939583,675.4415119532507],[1474713539583,646.8571710421504],[1474717139583,628.3971002059739],[1474720739583,604.5580713619933]],"key":"key-36","tags":{"role":"database","what":"teleported-goats","host":"36.example.com"},"tagCounts":{}},{"type":"points","hash":"4c1f518c","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,129.94561085720315],[1474555139583,82.69907360919511],[1474558739583,109.99888151832943],[1474562339583,96.36985163792576],[1474565939583,108.53989430124818],[1474569539583,116.61598694797613],[1474573139583,153.2013786872738],[1474576739583,167.87185596229116],[1474580339583,202.82797050491916],[1474583939583,229.2208001255377],[1474587539583,244.21737162154696],[1474591139583,269.414559837085],[1474594739583,281.6992965722225],[1474598339583,288.6309664272343],[1474601939583,305.49055743857605],[1474605539583,294.7234915486979],[1474609139583,276.91095325252326],[1474612739583,273.7701806686731],[1474616339583,260.33142155693565],[1474619939583,237.9058167813754],[1474623539583,201.30695938077886],[1474627139583,183.70407726812044],[1474630739583,157.19845949813336],[1474634339583,143.91877159984764],[1474637939583,109.62128336618518],[1474641539583,105.89323188952523],[1474645139583,102.25863461037662],[1474648739583,104.28648216183868],[1474652339583,115.25693473246524],[1474655939583,133.31171552897683],[1474659539583,142.12113266613994],[1474663139583,177.69021613897388],[1474666739583,200.21561685235014],[1474670339583,224.11534851372056],[1474673939583,247.4997540842719],[1474677539583,260.30832434201136],[1474681139583,285.8244796130996],[1474684739583,291.9060347109015],[1474688339583,293.1451250703995],[1474691939583,292.77495984977344],[1474695539583,286.3603173297389],[1474699139583,287.3857512100548],[1474702739583,264.2162403271311],[1474706339583,235.861180740008],[1474709939583,211.19493610650517],[1474713539583,182.9584850245333],[1474717139583,150.68387954041938],[1474720739583,151.75400806492465]],"key":"key-5","tags":{"role":"database","what":"teleported-goats","host":"5.example.com"},"tagCounts":{}},{"type":"points","hash":"dd0da7a5","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,44.135419059207074],[1474555139583,75.33338888550348],[1474558739583,90.55121400919327],[1474562339583,118.63765869149304],[1474565939583,125.5106889531231],[1474569539583,118.14770523207113],[1474573139583,130.34882291309827],[1474576739583,121.47488161998623],[1474580339583,101.646397380948],[1474583939583,98.19183757078623],[1474587539583,58.01817757509032],[1474591139583,40.57442229196522],[1474594739583,26.501355129939263],[1474598339583,-0.48505512578010546],[1474601939583,-27.331194982914354],[1474605539583,-47.55649614859018],[1474609139583,-61.09491850192459],[1474612739583,-79.30517643532963],[1474616339583,-64.63128813107686],[1474619939583,-69.09690610809099],[1474623539583,-51.885847989565704],[1474627139583,-37.83719613240647],[1474630739583,-18.428092757083085],[1474634339583,20.08433869368345],[1474637939583,38.534369774050745],[1474641539583,60.17512403061262],[1474645139583,96.39383500041214],[1474648739583,121.73469986440669],[1474652339583,112.2461685356081],[1474655939583,133.7347991316264],[1474659539583,129.1287509096075],[1474663139583,122.7447661753491],[1474666739583,102.8137215800976],[1474670339583,94.23150623123854],[1474673939583,69.5388552821461],[1474677539583,37.02564627684609],[1474681139583,10.773082993750874],[1474684739583,-12.989994567415389],[1474688339583,-38.823530032581914],[1474691939583,-60.64046820235914],[1474695539583,-61.138643666822716],[1474699139583,-76.69001681796723],[1474702739583,-64.16244536820079],[1474706339583,-59.74155748743],[1474709939583,-50.18364434235173],[1474713539583,-32.68926074493876],[1474717139583,-12.395479771160215],[1474720739583,-2.608006751752008]],"key":"key-50","tags":{"role":"database","what":"teleported-goats","host":"50.example.com"},"tagCounts":{}},{"type":"points","hash":"2ece1f1a","shard":{"site":"local"},"cadence":3600000,"values":[],"key":"key-13","tags":{"role":"database","what":"teleported-goats","host":"13.example.com"},"tagCounts":{}},{"type":"points","hash":"c0e77328","shard":{"site":"local"},"cadence":3600000,"values":[],"key":"key-31","tags":{"role":"database","what":"teleported-goats","host":"31.example.com"},"tagCounts":{}},{"type":"points","hash":"f6566279","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,726.7984412772887],[1474555139583,695.4980072215243],[1474558739583,681.540498848762],[1474562339583,661.9438318419452],[1474565939583,669.5400704338875],[1474569539583,658.6591734591307],[1474573139583,667.0423470156796],[1474576739583,678.6444571120842],[1474580339583,703.3037594790934],[1474583939583,712.6151606753319],[1474587539583,739.9519573176119],[1474591139583,764.6933277330379],[1474594739583,808.9637308742354],[1474598339583,815.652218733368],[1474601939583,829.2099361721652],[1474605539583,855.6165356131744],[1474609139583,857.1376475278319],[1474612739583,862.5785750894826],[1474616339583,852.3701209233346],[1474619939583,841.9647997150827],[1474623539583,835.3893161309251],[1474627139583,812.0772939593307],[1474630739583,781.6747799239286],[1474634339583,757.797050676073],[1474637939583,719.5414771893346],[1474641539583,705.8227961309755],[1474645139583,690.7653171969378],[1474648739583,676.0264945922314],[1474652339583,651.3491184230315],[1474655939583,659.1323251896977],[1474659539583,674.323167300675],[1474663139583,680.8250333677171],[1474666739583,691.9307717573861],[1474670339583,712.8775334793349],[1474673939583,737.4820756839117],[1474677539583,763.5017485498377],[1474681139583,785.4135821888303],[1474684739583,814.9587534482505],[1474688339583,830.2333458690355],[1474691939583,845.8492283461161],[1474695539583,856.7326863482664],[1474699139583,869.5085487915377],[1474702739583,868.1108269025406],[1474706339583,848.4645439173562],[1474709939583,833.7085497229574],[1474713539583,803.7375789226508],[1474717139583,784.7054146468577],[1474720739583,783.3716170202888]],"key":"key-41","tags":{"role":"database","what":"teleported-goats","host":"41.example.com"},"tagCounts":{}},{"type":"points","hash":"d3dbc4a3","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,329.2420683461496],[1474555139583,356.249836610146],[1474558739583,379.41381006331324],[1474562339583,408.96154176493997],[1474565939583,427.5710830319778],[1474569539583,444.3197110817071],[1474573139583,478.78725233056207],[1474576739583,475.2375510230326],[1474580339583,486.2144357302088],[1474583939583,485.61015689138014],[1474587539583,478.60955770174917],[1474591139583,461.5285151363023],[1474594739583,459.03750010876763],[1474598339583,422.47836024409446],[1474601939583,394.8217087978344],[1474605539583,377.39339499360267],[1474609139583,345.31389340485515],[1474612739583,323.4154839934481],[1474616339583,299.11181213835766],[1474619939583,283.942348386772],[1474623539583,283.6579884601024],[1474627139583,287.91893178778105],[1474630739583,294.95967526360863],[1474634339583,318.92978308626067],[1474637939583,330.06964126423964],[1474641539583,348.57312196762257],[1474645139583,387.3802575959701],[1474648739583,399.1634739647542],[1474652339583,437.20751165916374],[1474655939583,452.0481378457778],[1474659539583,476.038993255192],[1474663139583,484.7638905382043],[1474666739583,494.6110797347282],[1474670339583,484.7970662757366],[1474673939583,481.0693457628893],[1474677539583,466.03616049681017],[1474681139583,456.73414235340755],[1474684739583,425.6088622654426],[1474688339583,395.1745409555842],[1474691939583,375.49972757764795],[1474695539583,346.7861717383045],[1474699139583,327.6994506440924],[1474702739583,310.08773051752286],[1474706339583,289.46606371897053],[1474709939583,284.422488875003],[1474713539583,286.5434401558359],[1474717139583,297.5992853473157],[1474720739583,308.22645904657634]],"key":"key-62","tags":{"role":"database","what":"teleported-goats","host":"62.example.com"},"tagCounts":{}},{"type":"points","hash":"753c30bc","shard":{"site":"local"},"cadence":3600000,"values":[],"key":"key-52","tags":{"role":"database","what":"teleported-goats","host":"52.example.com"},"tagCounts":{}},{"type":"points","hash":"ba2a1f38","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,345.006552412461],[1474555139583,314.3395742825453],[1474558739583,297.5873018195597],[1474562339583,266.6803569904308],[1474565939583,236.97036173268634],[1474569539583,213.2656192804343],[1474573139583,186.99802938212036],[1474576739583,175.3504349689175],[1474580339583,159.2501640200669],[1474583939583,163.89943945937296],[1474587539583,157.6073100958172],[1474591139583,162.8195764870671],[1474594739583,160.8568171329573],[1474598339583,200.44642272808284],[1474601939583,213.4702738628099],[1474605539583,229.18126993640328],[1474609139583,282.0835856229758],[1474612739583,292.90010944584105],[1474616339583,316.99406963354],[1474619939583,320.1045486112041],[1474623539583,360.37762992492276],[1474627139583,350.28265200662497],[1474630739583,350.5529783816746],[1474634339583,349.7238087850542],[1474637939583,318.8217156333778],[1474641539583,316.8973050583594],[1474645139583,291.76383702984424],[1474648739583,257.05990299925594],[1474652339583,249.58330742109575],[1474655939583,211.57514623566107],[1474659539583,204.0584671869063],[1474663139583,178.07613204066075],[1474666739583,163.07232272564784],[1474670339583,147.86190520532273],[1474673939583,167.16001548466767],[1474677539583,162.394525916313],[1474681139583,182.10155936580617],[1474684739583,198.94559710087694],[1474688339583,205.96112188128237],[1474691939583,240.63462619112903],[1474695539583,247.46370812781205],[1474699139583,303.47042346416623],[1474702739583,307.4945693461011],[1474706339583,329.6095653926807],[1474709939583,340.8116483060344],[1474713539583,356.2146654103063],[1474717139583,346.23778140855893],[1474720739583,338.00442989336045]],"key":"key-56","tags":{"role":"database","what":"teleported-goats","host":"56.example.com"},"tagCounts":{}},{"type":"points","hash":"4bddfb78","shard":{"site":"local"},"cadence":3600000,"values":[],"key":"key-23","tags":{"role":"database","what":"teleported-goats","host":"23.example.com"},"tagCounts":{}},{"type":"points","hash":"7401c6ce","shard":{"site":"local"},"cadence":3600000,"values":[],"key":"key-28","tags":{"role":"database","what":"teleported-goats","host":"28.example.com"},"tagCounts":{}},{"type":"points","hash":"ed6b02c","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,359.5196317835255],[1474555139583,356.6890061597876],[1474558739583,385.53654297687433],[1474562339583,382.1387178380143],[1474565939583,390.4409469162215],[1474569539583,363.1573832081002],[1474573139583,368.68258980514116],[1474576739583,323.89132652595447],[1474580339583,318.39066021226586],[1474583939583,285.24037789944987],[1474587539583,255.28989658661186],[1474591139583,243.9485164940121],[1474594739583,208.21434668949956],[1474598339583,201.06594432523423],[1474601939583,192.58988394289884],[1474605539583,187.12047298465717],[1474609139583,175.54806971306522],[1474612739583,194.20095087088964],[1474616339583,202.31504147821443],[1474619939583,227.6401193140945],[1474623539583,254.46226217917044],[1474627139583,271.36919636884693],[1474630739583,305.6866413491359],[1474634339583,324.736228733246],[1474637939583,353.933967954286],[1474641539583,371.984619160764],[1474645139583,377.6354203028584],[1474648739583,382.04564700311425],[1474652339583,375.9197653255698],[1474655939583,369.71506054968614],[1474659539583,356.9239678024944],[1474663139583,346.8779467765387],[1474666739583,308.551355365584],[1474670339583,272.25629590607656],[1474673939583,254.51798421553138],[1474677539583,227.05390541470746],[1474681139583,198.8300818238249],[1474684739583,180.80637980355385],[1474688339583,191.93444187458118],[1474691939583,165.6215821329027],[1474695539583,187.6620668756504],[1474699139583,193.77599918706267],[1474702739583,217.77601315084624],[1474706339583,226.31394596168772],[1474709939583,251.16843056803202],[1474713539583,278.7323002097917],[1474717139583,303.5605317382659],[1474720739583,299.7750704741575]],"key":"key-18","tags":{"role":"database","what":"teleported-goats","host":"18.example.com"},"tagCounts":{}},{"type":"points","hash":"99e1d5bd","shard":{"site":"local"},"cadence":3600000,"values":[],"key":"key-29","tags":{"role":"database","what":"teleported-goats","host":"29.example.com"},"tagCounts":{}},{"type":"points","hash":"149bc006","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,796.6169678748392],[1474555139583,798.360447684718],[1474558739583,805.1689943004528],[1474562339583,813.6236284570774],[1474565939583,843.601563514672],[1474569539583,881.6648782475264],[1474573139583,905.4232143814193],[1474576739583,923.8966714481514],[1474580339583,941.8336723505124],[1474583939583,962.6738488902462],[1474587539583,989.0140355648431],[1474591139583,992.8222527293335],[1474594739583,989.3983955035674],[1474598339583,989.9586315185711],[1474601939583,977.032613155657],[1474605539583,959.8893542823936],[1474609139583,936.2765917736554],[1474612739583,923.7216975398361],[1474616339583,896.8759459848723],[1474619939583,872.6480199053083],[1474623539583,839.9918310759026],[1474627139583,811.8367582927134],[1474630739583,809.4366722430053],[1474634339583,800.533779449697],[1474637939583,791.3796544087354],[1474641539583,792.1432342464873],[1474645139583,807.5946736479063],[1474648739583,821.9029675935136],[1474652339583,845.7465478181651],[1474655939583,875.4936383712441],[1474659539583,894.1011940777781],[1474663139583,921.9495132545937],[1474666739583,940.7533641976863],[1474670339583,964.1548532187546],[1474673939583,979.9427360499383],[1474677539583,987.0066050557404],[1474681139583,992.9056477878997],[1474684739583,999.7481996215696],[1474688339583,969.195003318548],[1474691939583,956.8665844863052],[1474695539583,949.2436199499513],[1474699139583,919.1471047396917],[1474702739583,890.2060031036499],[1474706339583,867.2264996711954],[1474709939583,843.5226851855325],[1474713539583,829.0131023140591],[1474717139583,800.2928766527641],[1474720739583,789.795998192864]],"key":"key-82","tags":{"role":"database","what":"teleported-goats","host":"82.example.com"},"tagCounts":{}},{"type":"points","hash":"84a4f56d","shard":{"site":"local"},"cadence":3600000,"values":[],"key":"key-60","tags":{"role":"database","what":"teleported-goats","host":"60.example.com"},"tagCounts":{}},{"type":"points","hash":"4b685e0f","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,1053.4281929953677],[1474555139583,1052.763886308122],[1474558739583,1049.322565154911],[1474562339583,1032.4582592898441],[1474565939583,1031.2396878950058],[1474569539583,1003.4990591977723],[1474573139583,965.7027972561569],[1474576739583,957.4571199230884],[1474580339583,917.2028247077516],[1474583939583,911.1865796271351],[1474587539583,880.7060620824941],[1474591139583,872.1687847439204],[1474594739583,851.4329961887128],[1474598339583,857.8777564257003],[1474601939583,857.5988489601855],[1474605539583,885.9214354783828],[1474609139583,885.2640550637245],[1474612739583,915.5746394795663],[1474616339583,946.7937957528769],[1474619939583,972.017404269385],[1474623539583,987.6806685136374],[1474627139583,1017.5500051172266],[1474630739583,1031.1378339057942],[1474634339583,1048.1562492605192],[1474637939583,1045.0600962819997],[1474641539583,1063.0576207254778],[1474645139583,1036.5904354790673],[1474648739583,1028.9712622760321],[1474652339583,1024.230569146072],[1474655939583,994.4509513721163],[1474659539583,984.8150381424447],[1474663139583,937.5504227969186],[1474666739583,931.604389046434],[1474670339583,912.0271893479025],[1474673939583,869.8324906915761],[1474677539583,854.3621781678194],[1474681139583,853.9659763824405],[1474684739583,851.0451185627985],[1474688339583,855.6973189276412],[1474691939583,864.6426228310047],[1474695539583,888.0364246214685],[1474699139583,912.8636925926555],[1474702739583,936.9458088984245],[1474706339583,959.5016486153263],[1474709939583,981.3858874217498],[1474713539583,1005.8503511588181],[1474717139583,1016.2639085010339],[1474720739583,1026.9097213665507]],"key":"key-71","tags":{"role":"database","what":"teleported-goats","host":"71.example.com"},"tagCounts":{}},{"type":"points","hash":"82825665","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,413.30274010743545],[1474555139583,415.8097296757979],[1474558739583,379.5046348795637],[1474562339583,377.3914166313458],[1474565939583,382.16749271757766],[1474569539583,388.3446840899454],[1474573139583,397.86655398237656],[1474576739583,406.8599710196459],[1474580339583,431.13862136851685],[1474583939583,451.41765287492575],[1474587539583,486.19026384876526],[1474591139583,520.3544182519475],[1474594739583,537.4687670622438],[1474598339583,542.231651186279],[1474601939583,562.6624611314455],[1474605539583,564.5684693192895],[1474609139583,593.2112824874478],[1474612739583,570.5988362092628],[1474616339583,575.8237142684378],[1474619939583,555.3694677783847],[1474623539583,529.087658556376],[1474627139583,516.2732452552776],[1474630739583,478.6141862910372],[1474634339583,449.07418508549773],[1474637939583,445.34755633483866],[1474641539583,413.86307965533155],[1474645139583,387.45487745774136],[1474648739583,384.1834844240698],[1474652339583,383.01687152300525],[1474655939583,389.7329060788826],[1474659539583,398.6214874705038],[1474663139583,427.3343110323384],[1474666739583,438.04250720291066],[1474670339583,456.12493516647254],[1474673939583,469.93991570538753],[1474677539583,499.4087768996858],[1474681139583,529.4423794801199],[1474684739583,550.4221549594045],[1474688339583,556.0521099661767],[1474691939583,579.1831248061216],[1474695539583,575.0242945745133],[1474699139583,567.7692809843711],[1474702739583,576.8403206629613],[1474706339583,557.6386348626258],[1474709939583,537.8435549330845],[1474713539583,502.88252121642336],[1474717139583,471.81611325078495],[1474720739583,471.5724455860594]],"key":"key-69","tags":{"role":"database","what":"teleported-goats","host":"69.example.com"},"tagCounts":{}},{"type":"points","hash":"642cfdb2","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,-18.184431240122528],[1474555139583,4.694987857951848],[1474558739583,23.03477813549913],[1474562339583,30.215009592859644],[1474565939583,59.727561337769956],[1474569539583,99.15554828803965],[1474573139583,117.36622307374125],[1474576739583,144.60380742094225],[1474580339583,167.9337731583409],[1474583939583,170.9735514160038],[1474587539583,173.6855406922802],[1474591139583,193.8704033066191],[1474594739583,176.5532779928415],[1474598339583,162.1590403891621],[1474601939583,153.90045458721215],[1474605539583,128.46907033885574],[1474609139583,105.99300002781881],[1474612739583,65.03657613857276],[1474616339583,37.338315168820486],[1474619939583,20.00692119197285],[1474623539583,6.550207719416969],[1474627139583,-18.46688626252081],[1474630739583,-6.743314661431785],[1474634339583,-17.361304077383494],[1474637939583,-12.320479918150529],[1474641539583,4.926125234829449],[1474645139583,30.986753125265082],[1474648739583,47.55241126377918],[1474652339583,61.58275395973023],[1474655939583,90.6057633098304],[1474659539583,117.61374546303881],[1474663139583,131.79440669356373],[1474666739583,153.7789375391671],[1474670339583,177.12574156198934],[1474673939583,175.57302386198808],[1474677539583,189.54092414239932],[1474681139583,182.97453780438673],[1474684739583,170.2441454220284],[1474688339583,148.91019792243253],[1474691939583,122.94571140532145],[1474695539583,101.23770940160932],[1474699139583,73.74886107727288],[1474702739583,60.87023716613318],[1474706339583,21.268772935288805],[1474709939583,3.6075100671901748],[1474713539583,-10.011352300035107],[1474717139583,-18.273397428862772],[1474720739583,-23.528053765328508]],"key":"key-6","tags":{"role":"database","what":"teleported-goats","host":"6.example.com"},"tagCounts":{}},{"type":"points","hash":"8f70346c","shard":{"site":"local"},"cadence":3600000,"values":[[1474551539583,849.3963472652491],[1474555139583,872.4836317584866],[1474558739583,885.9703512705712],[1474562339583,911.1160256683168],[1474565939583,919.5525853286556],[1474569539583,963.7141651990869],[1474573139583,977.6801154169311],[1474576739583,1015.0832379459043],[1474580339583,1018.1992069741311],[1474583939583,1048.5572053391752],[1474587539583,1054.4933505285048],[1474591139583,1074.6837296429571],[1474594739583,1067.8748788736968],[1474598339583,1055.8546937346136],[1474601939583,1036.0751744168952],[1474605539583,1022.007231656637],[1474609139583,1002.6551528164279],[1474612739583,966.2126755533374],[1474616339583,946.4143773118071],[1474619939583,917.8211511053225],[1474623539583,909.5309827870208],[1474627139583,881.3380183805274],[1474630739583,862.025122434339],[1474634339583,871.5841598474892],[1474637939583,854.0575374246553],[1474641539583,872.398282749965],[1474645139583,887.4622007113762],[1474648739583,915.0451684754485],[1474652339583,924.8106432763947],[1474655939583,952.7359278070835],[1474659539583,987.7092068478702],[1474663139583,1004.2348397206188],[1474666739583,1028.4151695656699],[1474670339583,1044.8177562905817],[1474673939583,1071.0023555103066],[1474677539583,1058.5218273999772],[1474681139583,1056.4758038482098],[1474684739583,1053.3972469568148],[1474688339583,1049.0442787057273],[1474691939583,1032.2896083380099],[1474695539583,988.8193812196001],[1474699139583,983.6879227108542],[1474702739583,957.7986830247376],[1474706339583,920.6681907009553],[1474709939583,909.5484173115643],[1474713539583,887.4619396904304],[1474717139583,865.8892383826029],[1474720739583,857.8859676816614]],"key":"key-70","tags":{"role":"database","what":"teleported-goats","host":"70.example.com"},"tagCounts":{}},{"type":"points","hash":"1c07662c","shard":{"site":"local"},"cadence":3600000,"values":[],"key":"key-90","tags":{"role":"database","what":"teleported-goats","host":"90.example.com"},"tagCounts":{}}],"errors":[]}
  })

  module.addSignals({
    titleChanged: updateItemTitle,
    titleSubmitted: addNewItem,
    rangeChanged: {
      chain: [copy('input:range', 'state:monocle.datasource.range')],
      immediate: true
    },

    axisUpdated: [copy('input:value', 'state:monocle.options.axis')],
    stackedUpdated: [copy('input:value', 'state:monocle.options.stacked')],
    roundUpdated: [copy('input:value', 'state:monocle.options.round')],
    legendVisibleUpdated: [copy('input:value', 'state:monocle.options.legendVisible')],
    zeroBasedUpdated: [copy('input:value', 'state:monocle.options.zeroBased')],
    unitUpdated: [function({module, input}){ module.state.set('options.unit', input.value)}],
    valueScaleUpdated: [function({module, input}){ module.state.set('options.valueScale', input.value)}]
  })

}
